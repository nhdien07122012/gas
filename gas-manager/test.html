<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê·∫øm ti·ªÅn theo m·ªánh gi√° - Qu·∫£n l√Ω ƒëi·ªÉm gas</title>

<!-- T·∫£i font Roboto t·ª´ Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  /* ========== CSS VARIABLES FOR LIGHT MODE ========== */
  :root {
    /* M√†u s·∫Øc c∆° b·∫£n */
    --primary: #2c80ff;
    --primary-dark: #1a6de0;
    --primary-light: #5a9dff;
    --secondary: #34c759;
    --secondary-dark: #2aa64a;
    --danger: #ff3b30;
    --danger-dark: #e0352b;
    --warning: #ff9500;
    --warning-dark: #e08900;
    --info: #5ac8fa;
    --success: #34c759;
    
    /* M√†u n·ªÅn v√† vƒÉn b·∫£n Light Mode */
    --bg-primary: #ffffff;
    --bg-secondary: #f5f7fa;
    --bg-tertiary: #f8f9fa;
    --bg-card: #ffffff;
    --bg-modal: #ffffff;
    --bg-input: #ffffff;
    --bg-hover: #f8fafc;
    --bg-active: #e8f0fe;
    
    /* M√†u vƒÉn b·∫£n Light Mode */
    --text-primary: #333333;
    --text-secondary: #6c757d;
    --text-tertiary: #868e96;
    --text-inverse: #ffffff;
    --text-muted: #adb5bd;
    
    /* M√†u vi·ªÅn v√† b√≥ng */
    --border-color: #dee2e6;
    --border-light: #e9ecef;
    --border-dark: #ced4da;
    --shadow: 0 2px 10px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 25px rgba(0,0,0,0.12);
    --shadow-dark: 0 2px 10px rgba(0,0,0,0.15);
    
    /* Border radius */
    --radius-xl: 28px;
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --radius-xs: 8px;
    --radius-circle: 50%;
    
    /* Hi·ªáu ·ª©ng chuy·ªÉn ti·∫øp */
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.15s ease;
    --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* ƒê·ªô trong su·ªët */
    --opacity-disabled: 0.6;
    --opacity-hover: 0.9;
    --opacity-active: 0.8;
    
    /* Font ch·ªØ */
    --font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    --font-family-mono: 'Roboto Mono', 'Courier New', monospace;
  }
  
  /* ========== DARK MODE VARIABLES ========== */
  @media (prefers-color-scheme: dark) {
    :root {
      /* M√†u s·∫Øc c∆° b·∫£n */
      --primary: #3d8eff;
      --primary-dark: #2c7de6;
      --primary-light: #5a9dff;
      --secondary: #30c75a;
      --secondary-dark: #26a64a;
      --danger: #ff5252;
      --danger-dark: #ff3838;
      --warning: #ffa726;
      --warning-dark: #ff9800;
      --info: #42a5f5;
      --success: #30c75a;
      
      /* M√†u n·ªÅn v√† vƒÉn b·∫£n Dark Mode */
      --bg-primary: #121212;
      --bg-secondary: #1e1e1e;
      --bg-tertiary: #2d2d2d;
      --bg-card: #1e1e1e;
      --bg-modal: #252525;
      --bg-input: #2d2d2d;
      --bg-hover: #2a2a2a;
      --bg-active: #2c3e50;
      
      /* M√†u vƒÉn b·∫£n Dark Mode */
      --text-primary: #f5f5f5;
      --text-secondary: #b0b0b0;
      --text-tertiary: #8a8a8a;
      --text-inverse: #121212;
      --text-muted: #666666;
      
      /* M√†u vi·ªÅn v√† b√≥ng Dark Mode */
      --border-color: #3a3a3a;
      --border-light: #4a4a4a;
      --border-dark: #555555;
      --shadow: 0 2px 10px rgba(0,0,0,0.3);
      --shadow-lg: 0 8px 25px rgba(0,0,0,0.4);
      --shadow-dark: 0 2px 10px rgba(0,0,0,0.5);
    }
    
    /* ƒê·∫£m b·∫£o header c√≥ ch·ªØ tr·∫Øng */
    header {
      color: var(--text-inverse) !important;
    }
    
    header h1,
    header p {
      color: var(--text-inverse) !important;
    }
    
    /* ƒê·∫£m b·∫£o n√∫t quay v·ªÅ c√≥ m√†u tr·∫Øng */
    .menu-back {
      color: var(--text-inverse) !important;
    }
    
    /* ƒêi·ªÅu ch·ªânh m√†u n·ªÅn cho result header */
    .result-header {
      background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary)) !important;
    }
    
    /* ƒê·∫£m b·∫£o icon menu c√≥ m√†u tr·∫Øng trong dark mode */
    .menu-back svg {
      stroke: var(--text-inverse);
    }
  }
  
  /* ========== CSS RESET & BASE STYLES ========== */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  html {
    font-size: 16px;
    transition: background-color 0.5s ease;
    font-family: var(--font-family);
  }
  
  body {
    font-family: var(--font-family);
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    line-height: 1.6;
    padding: 15px;
    min-height: 100vh;
    transition: var(--transition-slow);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-weight: 400;
  }
  
  .container {
    max-width: 900px;
    margin: 0 auto;
    background: var(--bg-card);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    transition: var(--transition);
    border: 1px solid var(--border-color);
  }
  
  /* Header */
  header {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: var(--text-inverse);
    padding: 20px;
    position: relative;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  }
  
  header h1 {
    font-size: 1.6rem;
    margin-bottom: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-weight: 600;
    font-family: var(--font-family);
  }
  
  header p {
    opacity: 0.9;
    font-size: 0.95rem;
    text-align: center;
    font-family: var(--font-family);
    font-weight: 400;
  }
  
  .menu-back {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.2);
    border: none;
    color: var(--text-inverse);
    padding: 8px 12px 8px 8px;
    border-radius: var(--radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    font-family: var(--font-family);
    font-weight: 500;
    transition: var(--transition);
    text-decoration: none;
  }
  
  .menu-back:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-50%) scale(1.05);
  }
  
  /* Icon menu hamburger */
  .menu-icon {
    width: 24px;
    height: 24px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  
  .menu-icon svg {
    width: 20px;
    height: 20px;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
  }
  
  /* K·∫øt qu·∫£ tr√™n c√πng */
  .result-header {
    background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
    padding: 20px;
    border-bottom: 2px solid var(--border-color);
    display: none;
  }
  
  .total-display {
    text-align: center;
    margin-bottom: 15px;
  }
  
  .total-amount {
    font-size: 2.2rem;
    font-weight: 800;
    color: var(--primary);
    margin: 10px 0;
    font-family: var(--font-family);
  }
  
  .comparison-row {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
    margin: 15px 0;
  }
  
  .comparison-item {
    text-align: center;
    min-width: 150px;
  }
  
  .comparison-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 5px;
    font-family: var(--font-family);
    font-weight: 400;
  }
  
  .comparison-value {
    font-size: 1.5rem;
    font-weight: 700;
    font-family: var(--font-family);
  }
  
  .revenue-total {
    color: var(--secondary);
  }
  
  .difference {
    color: var(--warning);
  }
  
  .positive {
    color: var(--secondary);
  }
  
  .negative {
    color: var(--danger);
  }
  
  /* Form nh·∫≠p li·ªáu */
  .input-section {
    padding: 20px;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--text-primary);
    font-family: var(--font-family);
  }
  
  select {
    width: 100%;
    padding: 12px 15px;
    background: var(--bg-input);
    color: var(--text-primary);
    border: 1.5px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: 1rem;
    transition: var(--transition);
    font-family: var(--font-family);
    font-weight: 400;
  }
  
  select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(44, 128, 255, 0.2);
  }
  
  /* B·∫£ng nh·∫≠p m·ªánh gi√° g·ªçn */
  .denominations-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow);
    border: 1px solid var(--border-color);
  }
  
  .denominations-table th {
    background: var(--bg-tertiary);
    padding: 16px 15px;
    text-align: left;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 2px solid var(--border-color);
    font-family: var(--font-family);
  }
  
  .denominations-table td {
    padding: 14px 15px;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    font-family: var(--font-family);
    font-weight: 400;
  }
  
  .denominations-table tr:last-child td {
    border-bottom: none;
  }
  
  .denominations-table tr:hover {
    background-color: var(--bg-hover);
  }
  
  .denomination-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .denomination-icon {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-circle);
    background: var(--primary);
    color: var(--text-inverse);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.9rem;
    font-family: var(--font-family);
  }
  
  .denomination-text {
    display: flex;
    flex-direction: column;
  }
  
  .denomination-value {
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-family);
  }
  
  .denomination-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-family: var(--font-family);
    font-weight: 400;
  }
  
  .input-cell {
    width: 120px;
  }
  
  .bill-input {
    width: 100%;
    padding: 12px;
    background: var(--bg-input);
    color: var(--text-primary);
    border: 1.5px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: 1.1rem;
    text-align: center;
    transition: var(--transition);
    font-family: var(--font-family);
    font-weight: 500;
  }
  
  .bill-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(44, 128, 255, 0.2);
  }
  
  .amount-cell {
    text-align: right;
    font-weight: 600;
    color: var(--primary);
    font-size: 1.1rem;
    font-family: var(--font-family);
  }
  
  /* N√∫t ƒëi·ªÅu ch·ªânh nhanh */
  .quick-controls {
    display: flex;
    gap: 5px;
    margin-top: 5px;
  }
  
  .quick-btn {
    flex: 1;
    padding: 6px;
    border: 1px solid var(--border-color);
    background: var(--bg-input);
    color: var(--text-primary);
    border-radius: var(--radius-xs);
    cursor: pointer;
    font-size: 0.85rem;
    transition: var(--transition-fast);
    font-family: var(--font-family);
    font-weight: 500;
  }
  
  .quick-btn:hover {
    background: var(--primary-light);
    color: var(--text-inverse);
    border-color: var(--primary);
  }
  
  /* N√∫t h√†nh ƒë·ªông */
  .action-buttons {
    display: flex;
    gap: 12px;
    margin-top: 25px;
    flex-wrap: wrap;
  }
  
  .action-btn {
    flex: 1;
    min-width: 140px;
    padding: 16px;
    border: none;
    border-radius: var(--radius-md);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-family: var(--font-family);
  }
  
  .btn-primary {
    background-color: var(--primary);
    color: var(--text-inverse);
    border: 1px solid var(--primary-dark);
  }
  
  .btn-primary:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(44, 128, 255, 0.3);
  }
  
  .btn-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }
  
  .btn-secondary:hover {
    background-color: var(--bg-hover);
    transform: translateY(-2px);
    border-color: var(--border-dark);
  }
  
  .btn-success {
    background-color: var(--secondary);
    color: var(--text-inverse);
    border: 1px solid var(--secondary-dark);
  }
  
  .btn-success:hover {
    background-color: var(--secondary-dark);
    transform: translateY(-2px);
  }
  
  .btn-warning {
    background-color: var(--warning);
    color: var(--text-inverse);
    border: 1px solid var(--warning-dark);
  }
  
  .btn-warning:hover {
    background-color: var(--warning-dark);
    transform: translateY(-2px);
  }
  
  /* Toast */
  .toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) translateY(100px);
    background: var(--primary);
    color: var(--text-inverse);
    padding: 16px 24px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    opacity: 0;
    transition: var(--transition);
    min-width: 280px;
    text-align: center;
    border: 1px solid var(--primary-dark);
    font-family: var(--font-family);
    font-weight: 500;
  }

  .toast.show {
    transform: translate(-50%, -50%) translateY(0);
    opacity: 1;
  }
  
  .toast.success {
    background: var(--secondary);
    border-color: var(--secondary-dark);
  }
  
  .toast.error {
    background: var(--danger);
    border-color: var(--danger-dark);
  }
  
  /* ========== SCROLLBAR STYLING ========== */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  
  ::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--border-dark);
    border-radius: var(--radius-sm);
    border: 2px solid var(--bg-tertiary);
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }
  
  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--border-dark) var(--bg-tertiary);
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    body {
      padding: 10px;
    }
    
    header {
      padding: 18px;
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }
    
    header h1 {
      font-size: 1.4rem;
    }
    
    .total-amount {
      font-size: 1.8rem;
    }
    
    .comparison-row {
      gap: 15px;
    }
    
    .comparison-item {
      min-width: 120px;
    }
    
    .comparison-value {
      font-size: 1.3rem;
    }
    
    .denominations-table {
      font-size: 0.9rem;
    }
    
    .denominations-table th,
    .denominations-table td {
      padding: 12px 10px;
    }
    
    .denomination-icon {
      width: 35px;
      height: 35px;
      font-size: 0.8rem;
    }
    
    .action-buttons {
      flex-direction: column;
    }
    
    .action-btn {
      min-width: 100%;
      padding: 14px;
      min-height: 44px;
    }
    
    .input-section {
      padding: 18px;
    }
  }
  
  @media (max-width: 480px) {
    body {
      padding: 8px;
    }
    
    header {
      padding: 15px;
      border-radius: var(--radius-md) var(--radius-md) 0 0;
    }
    
    header h1 {
      font-size: 1.2rem;
    }
    
    .denominations-table {
      display: block;
      overflow-x: auto;
    }
    
    .input-cell {
      width: 100px;
    }
    
    .bill-input {
      padding: 10px;
      font-size: 1rem;
    }
    
    .comparison-row {
      flex-direction: column;
      gap: 12px;
    }
    
    .menu-back {
      padding: 6px 10px 6px 6px;
      font-size: 0.85rem;
      gap: 6px;
    }
    
    .menu-icon {
      width: 20px;
      height: 20px;
    }
    
    .menu-icon svg {
      width: 18px;
      height: 18px;
    }
  }
  
  /* ========== DARK MODE SPECIFIC ADJUSTMENTS ========== */
  @media (prefers-color-scheme: dark) {
    /* ƒêi·ªÅu ch·ªânh m√†u cho c√°c n√∫t quick control */
    .quick-btn {
      background: var(--bg-secondary);
      border-color: var(--border-dark);
    }
    
    .quick-btn:hover {
      background: var(--primary);
    }
    
    /* ƒêi·ªÅu ch·ªânh m√†u placeholder */
    .bill-input::placeholder {
      color: var(--text-muted);
    }
    
    /* ƒêi·ªÅu ch·ªânh b√≥ng cho container */
    .container {
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    /* ƒêi·ªÅu ch·ªânh thanh scrollbar trong dark mode */
    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--text-muted);
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-secondary);
    }
    
    /* ƒêi·ªÅu ch·ªânh hover cho table rows */
    .denominations-table tr:hover {
      background-color: var(--bg-tertiary);
    }
    
    /* ƒêi·ªÅu ch·ªânh m√†u border cho b·∫£ng */
    .denominations-table {
      border-color: var(--border-dark);
    }
    
    /* ƒêi·ªÅu ch·ªânh m√†u cho c√°c select option */
    option {
      background-color: var(--bg-modal);
      color: var(--text-primary);
      font-family: var(--font-family);
    }
  }
  
  /* ========== REDUCED MOTION SUPPORT ========== */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    .toast {
      transition: opacity 0.1s;
    }
    
    button:hover,
    .menu-back:hover {
      transform: none !important;
    }
  }
  
  /* ========== FONT WEIGHT CONSISTENCY ========== */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    font-family: var(--font-family);
  }
  
  strong, b {
    font-weight: 700;
    font-family: var(--font-family);
  }
  
  /* ========== ANIMATIONS ========== */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .fade-in {
    animation: fadeIn 0.3s ease-out;
  }
</style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="menu-back">
                <div class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span>Quay l·∫°i</span>
            </a>
            <h1>üí∞ ƒê·∫øm ti·ªÅn theo m·ªánh gi√°</h1>
            <p>Nh·∫≠p s·ªë l∆∞·ª£ng t·ªù ti·ªÅn ƒë·ªÉ t√≠nh t·ªïng nhanh ch√≥ng</p>
        </header>
        
        <!-- K·∫æT QU·∫¢ TR√äN C√ôNG -->
        <div class="result-header" id="result-header" style="display: none;">
            <div class="total-display">
                <div class="total-amount" id="total-amount">0 ‚Ç´</div>
                <div>T·ªïng ti·ªÅn ƒë·∫øm ƒë∆∞·ª£c</div>
            </div>
            
            <div class="comparison-row">
                <div class="comparison-item">
                    <div class="comparison-label">Doanh thu ca</div>
                    <div class="comparison-value revenue-total" id="revenue-total">0 ‚Ç´</div>
                </div>
                <div class="comparison-item">
                    <div class="comparison-label">Ch√™nh l·ªách</div>
                    <div class="comparison-value difference" id="difference-amount">0 ‚Ç´</div>
                </div>
                <div class="comparison-item">
                    <div class="comparison-label">T√¨nh tr·∫°ng</div>
                    <div class="comparison-value" id="status-text">-</div>
                </div>
            </div>
        </div>
        
        <!-- FORM NH·∫¨P LI·ªÜU -->
        <div class="input-section">
            <div class="form-group">
                <label for="select-shift">Ch·ªçn ca c·∫ßn ƒë·∫øm ti·ªÅn:</label>
                <select id="select-shift">
                    <option value="">-- Ch·ªçn ca --</option>
                    <!-- Options s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </select>
            </div>
            
            <h3 style="margin: 20px 0 15px 0; color: var(--text-primary); font-family: var(--font-family); font-weight: 600;">Nh·∫≠p s·ªë l∆∞·ª£ng t·ªù ti·ªÅn:</h3>
            
            <table class="denominations-table">
                <thead>
                    <tr>
                        <th style="font-family: var(--font-family);">M·ªánh gi√°</th>
                        <th style="font-family: var(--font-family);">S·ªë t·ªù</th>
                        <th style="font-family: var(--font-family);">Th√†nh ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody id="denominations-body">
                    <!-- C√°c d√≤ng m·ªánh gi√° s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </tbody>
            </table>
            
            <div class="action-buttons">
                <button class="action-btn btn-primary" onclick="calculateTotal(true)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;">
                        <path d="M9 7H6C4.89543 7 4 7.89543 4 9V18C4 19.1046 4.89543 20 6 20H15C16.1046 20 17 19.1046 17 18V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9 15H12L20.5 6.5C21.3284 5.67157 21.3284 4.32843 20.5 3.5C19.6716 2.67157 18.3284 2.67157 17.5 3.5L9 12V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    T√≠nh to√°n
                </button>
                <button class="action-btn btn-secondary" onclick="resetForm()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;">
                        <path d="M4 4V9H4.58152M19.9381 11C19.446 7.05369 16.0796 4 12 4C8.64262 4 5.76829 6.06817 4.58152 9M4.58152 9H9M20 20V15H19.4185M19.4185 15C18.2317 17.9318 15.3574 20 12 20C7.92038 20 4.55399 16.9463 4.06189 13M19.4185 15H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Nh·∫≠p l·∫°i
                </button>
                <button class="action-btn btn-success" onclick="saveCount()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;">
                        <path d="M19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17 21V13H7V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 3V8H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    L∆∞u k·∫øt qu·∫£
                </button>
                <button class="action-btn btn-warning" onclick="copyToClipboard()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;">
                        <path d="M8 16H6C4.89543 16 4 15.1046 4 14V6C4 4.89543 4.89543 4 6 4H14C15.1046 4 16 4.89543 16 6V8M10 20H18C19.1046 20 20 19.1046 20 18V10C20 8.89543 19.1046 8 18 8H10C8.89543 8 8 8.89543 8 10V18C8 19.1046 8.89543 20 10 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Sao ch√©p
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast notification -->
    <div class="toast" id="toast">
        <span id="toast-message">ƒê√£ sao ch√©p v√†o clipboard!</span>
    </div>

    <script>
        // Danh s√°ch m·ªánh gi√° ti·ªÅn Vi·ªát Nam (ch·ªâ c√°c m·ªánh gi√° ph·ªï bi·∫øn)
        const denominations = [
            { value: 500000, label: "500,000 VNƒê", short: "500K", color: "#ff6b6b" },
            { value: 200000, label: "200,000 VNƒê", short: "200K", color: "#4ecdc4" },
            { value: 100000, label: "100,000 VNƒê", short: "100K", color: "#45b7d1" },
            { value: 50000, label: "50,000 VNƒê", short: "50K", color: "#96ceb4" },
            { value: 20000, label: "20,000 VNƒê", short: "20K", color: "#feca57" },
            { value: 10000, label: "10,000 VNƒê", short: "10K", color: "#ff9ff3" },
            { value: 5000, label: "5,000 VNƒê", short: "5K", color: "#54a0ff" },
            { value: 2000, label: "2,000 VNƒê", short: "2K", color: "#5f27cd" },
            { value: 1000, label: "1,000 VNƒê", short: "1K", color: "#c8d6e5" }
        ];

        // Bi·∫øn l∆∞u doanh thu ca ƒë∆∞·ª£c ch·ªçn
        let selectedShiftRevenue = 0;
        let currentCalculations = [];
        
        // H√†m ƒë·ªãnh d·∫°ng ti·ªÅn t·ªá
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(amount);
        }
        
        // H√†m hi·ªÉn th·ªã toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // H√†m t·∫°o b·∫£ng nh·∫≠p li·ªáu
        function createDenominationTable() {
            const tbody = document.getElementById('denominations-body');
            tbody.innerHTML = '';
            
            denominations.forEach((denom, index) => {
                const row = document.createElement('tr');
                row.className = 'fade-in';
                row.innerHTML = `
                    <td>
                        <div class="denomination-info">
                            <div class="denomination-icon" style="background-color: ${denom.color}">
                                ${denom.short}
                            </div>
                            <div class="denomination-text">
                                <div class="denomination-value">${denom.label}</div>
                                <div class="denomination-label">${formatCurrency(denom.value)}</div>
                            </div>
                        </div>
                    </td>
                    <td class="input-cell">
                        <input 
                            type="number" 
                            class="bill-input" 
                            id="denom-${denom.value}"
                            placeholder="0"
                            min="0"
                            oninput="calculateSingleRow(${denom.value})"
                            onfocus="this.select()"
                        >
                        <div class="quick-controls">
                            <button class="quick-btn" onclick="quickAdd(${denom.value}, 1)">+1</button>
                            <button class="quick-btn" onclick="quickAdd(${denom.value}, 5)">+5</button>
                            <button class="quick-btn" onclick="quickAdd(${denom.value}, 10)">+10</button>
                            <button class="quick-btn" onclick="quickAdd(${denom.value}, -1)">-1</button>
                        </div>
                    </td>
                    <td class="amount-cell" id="amount-${denom.value}">
                        0 ‚Ç´
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // H√†m th√™m nhanh s·ªë t·ªù
        function quickAdd(denomValue, amount) {
            const input = document.getElementById(`denom-${denomValue}`);
            let currentValue = parseInt(input.value) || 0;
            let newValue = currentValue + amount;
            
            if (newValue < 0) newValue = 0;
            
            input.value = newValue;
            calculateSingleRow(denomValue);
        }
        
        // H√†m t√≠nh to√°n m·ªôt d√≤ng
        function calculateSingleRow(denomValue) {
            const input = document.getElementById(`denom-${denomValue}`);
            const amountCell = document.getElementById(`amount-${denomValue}`);
            const quantity = parseInt(input.value) || 0;
            const amount = quantity * denomValue;
            
            amountCell.textContent = formatCurrency(amount);
            
            // T·ª± ƒë·ªông t√≠nh t·ªïng khi nh·∫≠p (kh√¥ng cu·ªôn trang)
            setTimeout(() => calculateTotal(false), 100);
        }
        
        // H√†m t√≠nh t·ªïng ti·ªÅn (v·ªõi t√πy ch·ªçn cu·ªôn trang)
        function calculateTotal(scrollToResult = false) {
            let total = 0;
            currentCalculations = [];
            
            denominations.forEach(denom => {
                const input = document.getElementById(`denom-${denom.value}`);
                const quantity = parseInt(input.value) || 0;
                
                if (quantity > 0) {
                    const amount = quantity * denom.value;
                    total += amount;
                    
                    currentCalculations.push({
                        denomination: denom.value,
                        label: denom.label,
                        quantity: quantity,
                        amount: amount
                    });
                }
            });
            
            displayResults(total);
            
            // T·ª± ƒë·ªông cu·ªôn l√™n ph·∫ßn k·∫øt qu·∫£ n·∫øu ƒë∆∞·ª£c y√™u c·∫ßu
            if (scrollToResult) {
                const resultHeader = document.getElementById('result-header');
                if (resultHeader) {
                    resultHeader.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start',
                        inline: 'nearest'
                    });
                }
            }
            
            return total;
        }
        
        // H√†m hi·ªÉn th·ªã k·∫øt qu·∫£ (tr√™n c√πng)
        function displayResults(total) {
            const resultHeader = document.getElementById('result-header');
            const totalAmount = document.getElementById('total-amount');
            const revenueTotal = document.getElementById('revenue-total');
            const differenceAmount = document.getElementById('difference-amount');
            const statusText = document.getElementById('status-text');
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            totalAmount.textContent = formatCurrency(total);
            
            // T√≠nh ch√™nh l·ªách v·ªõi doanh thu ca
            const difference = total - selectedShiftRevenue;
            differenceAmount.textContent = formatCurrency(difference);
            
            // Hi·ªÉn th·ªã doanh thu ca
            revenueTotal.textContent = formatCurrency(selectedShiftRevenue);
            
            // Hi·ªÉn th·ªã t√¨nh tr·∫°ng
            if (difference === 0) {
                statusText.textContent = "ƒê·∫¶Y ƒê·ª¶";
                statusText.className = "comparison-value positive";
            } else if (difference > 0) {
                statusText.textContent = `D∆Ø ${formatCurrency(difference)}`;
                statusText.className = "comparison-value positive";
            } else {
                statusText.textContent = `THI·∫æU ${formatCurrency(Math.abs(difference))}`;
                statusText.className = "comparison-value negative";
            }
            
            resultHeader.style.display = 'block';
        }
        
        // H√†m reset form
        function resetForm() {
            denominations.forEach(denom => {
                const input = document.getElementById(`denom-${denom.value}`);
                input.value = '';
                document.getElementById(`amount-${denom.value}`).textContent = '0 ‚Ç´';
            });
            
            document.getElementById('result-header').style.display = 'none';
            showToast('‚úÖ ƒê√£ x√≥a t·∫•t c·∫£ s·ªë li·ªáu!');
            
            // T·ª± ƒë·ªông focus v√†o √¥ nh·∫≠p ƒë·∫ßu ti√™n sau khi reset
            setTimeout(() => {
                const firstInput = document.getElementById('denom-500000');
                if (firstInput) firstInput.focus();
            }, 300);
        }
        
        // H√†m l∆∞u k·∫øt qu·∫£
        function saveCount() {
            const selectedShift = document.getElementById('select-shift').value;
            const total = calculateTotal(false);
            
            if (total === 0) {
                showToast('‚ö†Ô∏è Ch∆∞a c√≥ s·ªë li·ªáu ƒë·ªÉ l∆∞u!', 'error');
                return;
            }
            
            if (!selectedShift) {
                showToast('‚ö†Ô∏è Vui l√≤ng ch·ªçn ca tr∆∞·ªõc khi l∆∞u!', 'error');
                return;
            }
            
            const countData = {
                shift: selectedShift,
                timestamp: new Date().toISOString(),
                total: total,
                revenue: selectedShiftRevenue,
                difference: total - selectedShiftRevenue,
                details: currentCalculations
            };
            
            let savedCounts = JSON.parse(localStorage.getItem('money_counts') || '[]');
            savedCounts = savedCounts.filter(item => item.shift !== selectedShift);
            savedCounts.push(countData);
            
            localStorage.setItem('money_counts', JSON.stringify(savedCounts));
            
            showToast(`‚úÖ ƒê√£ l∆∞u k·∫øt qu·∫£ cho ca ${getShiftDisplayName(selectedShift)}`);
        }
        
        // H√†m sao ch√©p k·∫øt qu·∫£
        async function copyToClipboard() {
            const total = calculateTotal(false);
            
            if (total === 0) {
                showToast('‚ö†Ô∏è Ch∆∞a c√≥ s·ªë li·ªáu ƒë·ªÉ sao ch√©p!', 'error');
                return;
            }
            
            const selectedShift = document.getElementById('select-shift').value;
            const shiftName = selectedShift ? getShiftDisplayName(selectedShift) : 'Kh√¥ng x√°c ƒë·ªãnh';
            const difference = total - selectedShiftRevenue;
            
            let text = `=== K·∫æT QU·∫¢ ƒê·∫æM TI·ªÄN ===\n`;
            text += `Ca: ${shiftName}\n`;
            text += `Th·ªùi gian: ${new Date().toLocaleString('vi-VN')}\n\n`;
            
            text += `CHI TI·∫æT M·ªÜNH GI√Å:\n`;
            currentCalculations.forEach(item => {
                text += `${item.label.padEnd(15)} √ó ${item.quantity.toString().padStart(3)} t·ªù = ${formatCurrency(item.amount)}\n`;
            });
            
            text += `\nT·ªîNG ƒê·∫æM ƒê∆Ø·ª¢C: ${formatCurrency(total)}\n`;
            text += `DOANH THU CA: ${formatCurrency(selectedShiftRevenue)}\n`;
            
            if (difference > 0) {
                text += `CH√äNH L·ªÜCH: D∆Ø ${formatCurrency(difference)}\n`;
            } else if (difference < 0) {
                text += `CH√äNH L·ªÜCH: THI·∫æU ${formatCurrency(Math.abs(difference))}\n`;
            } else {
                text += `CH√äNH L·ªÜCH: ƒê·∫¶Y ƒê·ª¶\n`;
            }
            
            try {
                await navigator.clipboard.writeText(text);
                showToast('‚úÖ ƒê√£ sao ch√©p k·∫øt qu·∫£ v√†o clipboard!');
            } catch (err) {
                showToast('‚ùå L·ªói khi sao ch√©p!', 'error');
                console.error(err);
            }
        }
        
        // H√†m l·∫•y t√™n hi·ªÉn th·ªã c·ªßa ca
        function getShiftDisplayName(shiftKey) {
            if (/^\d{4}-\d{2}-\d{2}/.test(shiftKey)) {
                const d = new Date(shiftKey);
                const day = String(d.getDate()).padStart(2, '0');
                const month = String(d.getMonth() + 1).padStart(2, '0');
                const year = d.getFullYear();
                return `Ca ${day}-${month}-${year}`;
            }
            return shiftKey;
        }
        
        // H√†m t·∫£i danh s√°ch ca v√† doanh thu
        async function loadShiftsAndRevenue() {
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbyRnnoEd2BnD7u1pXHER17Cv95BN9Z77yUeO6oR7CFRtbUqd-SiVJqBv5ENYyARwX77fw/exec');
                const data = await response.json();
                
                const shiftMap = new Map();
                
                // T√≠nh doanh thu t·ª´ng ca
                data.forEach(item => {
                    if (item.ca && item.so_tien) {
                        const amount = parseInt(item.so_tien) || 0;
                        if (shiftMap.has(item.ca)) {
                            shiftMap.set(item.ca, shiftMap.get(item.ca) + amount);
                        } else {
                            shiftMap.set(item.ca, amount);
                        }
                    }
                });
                
                // ƒêi·ªÅn v√†o dropdown
                const select = document.getElementById('select-shift');
                const shifts = Array.from(shiftMap.entries()).sort((a, b) => {
                    // S·∫Øp x·∫øp theo ng√†y gi·∫£m d·∫ßn
                    return b[0].localeCompare(a[0]);
                });
                
                shifts.forEach(([shiftKey, revenue]) => {
                    const option = document.createElement('option');
                    option.value = shiftKey;
                    option.textContent = `${getShiftDisplayName(shiftKey)} (${formatCurrency(revenue)})`;
                    option.dataset.revenue = revenue;
                    select.appendChild(option);
                });
                
                // S·ª± ki·ªán khi ch·ªçn ca
                select.addEventListener('change', function() {
                    const selectedOption = this.options[this.selectedIndex];
                    selectedShiftRevenue = parseInt(selectedOption.dataset.revenue) || 0;
                    
                    // Load k·∫øt qu·∫£ ƒë√£ l∆∞u n·∫øu c√≥
                    loadSavedCount();
                    
                    // T√≠nh l·∫°i n·∫øu ƒë√£ c√≥ d·ªØ li·ªáu
                    if (currentCalculations.length > 0) {
                        calculateTotal(false);
                    }
                });
                
            } catch (error) {
                console.log('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ server:', error);
                createSampleShifts();
            }
        }
        
        // H√†m t·∫°o ca m·∫´u
        function createSampleShifts() {
            const select = document.getElementById('select-shift');
            const today = new Date();
            
            // T·∫°o 5 ca g·∫ßn nh·∫•t
            for (let i = 0; i < 5; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const shiftKey = `${year}-${month}-${day}`;
                
                // Doanh thu ng·∫´u nhi√™n m·∫´u
                const sampleRevenue = Math.floor(Math.random() * 50000000) + 10000000;
                
                const option = document.createElement('option');
                option.value = shiftKey;
                option.textContent = `${getShiftDisplayName(shiftKey)} (${formatCurrency(sampleRevenue)})`;
                option.dataset.revenue = sampleRevenue;
                select.appendChild(option);
            }
        }
        
        // H√†m load k·∫øt qu·∫£ ƒë√£ l∆∞u
        function loadSavedCount() {
            const selectedShift = document.getElementById('select-shift').value;
            if (!selectedShift) return;
            
            const savedCounts = JSON.parse(localStorage.getItem('money_counts') || '[]');
            const savedData = savedCounts.find(item => item.shift === selectedShift);
            
            if (savedData) {
                // ƒêi·ªÅn s·ªë li·ªáu v√†o form
                savedData.details.forEach(item => {
                    const input = document.getElementById(`denom-${item.denomination}`);
                    if (input) {
                        input.value = item.quantity;
                        calculateSingleRow(item.denomination);
                    }
                });
                
                // T√≠nh v√† hi·ªÉn th·ªã k·∫øt qu·∫£ (kh√¥ng cu·ªôn trang)
                calculateTotal(false);
                showToast('‚úÖ ƒê√£ t·∫£i s·ªë li·ªáu ƒë√£ l∆∞u!');
            }
        }
        
        // Kh·ªüi t·∫°o trang
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== TRANG ƒê·∫æM TI·ªÄN ƒêANG KH·ªûI ƒê·ªòNG ===');
            createDenominationTable();
            loadShiftsAndRevenue();
            
            // T·ª± ƒë·ªông focus v√†o √¥ nh·∫≠p ƒë·∫ßu ti√™n
            setTimeout(() => {
                const firstInput = document.getElementById('denom-500000');
                if (firstInput) firstInput.focus();
            }, 500);
        });
    </script>
</body>
</html>